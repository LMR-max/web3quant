# 系统化加密交易信号研究框架（Framework）

> 面向“研究 → 原型 → 验证 → 上线”闭环，适配当前项目结构

---

## 1. 目标与边界
- **目标**：在多个加密市场（spot/swap/future）上研发可验证的系统化信号，输出可复现的研究报告与可回测的策略原型。
- **边界**：避免数据泄露、过拟合与回测偏差；对交易成本/滑点/资金容量敏感。

---

## 2. 数据层（Data Layer）
**输入**：OHLCV、成交量、订单簿、资金费率、链上与社媒（可选）

**职责**：
- 统一数据拉取、缓存、落盘
- 数据质量校验与缺失处理
- 生成可复现的数据快照（版本化）

**对应模块**：
- crypto_data_system/fetchers
- crypto_data_system/storage
- data_manager_storage/
- data/cache/

**质量门槛**：
- 缺失率 < 1%
- 时间戳连续率 > 99%
- 异常值检测（价格跳变/成交量异常）

---

## 3. 特征与因子层（Feature/Factor Layer）
**目标**：从原始数据生成可解释、可稳定的因子与特征。

**建议类别**：
- 价格动量、反转、均线距离
- 波动率（历史/高低/帕金森）
- 量价关系（量比/相关）
- 结构特征（高低区间位置、价差）

**对应模块**：
- factor_research/factor_research.py
- alphagen_style/*（可做自动生成/筛选）

**输出**：
- 标准化后的特征矩阵 X
- 标签 y（未来收益/方向/波动）

---

## 4. 标签定义与任务设定（Labeling）
**核心原则**：严格时间切分 + 明确预测 horizon

**任务类型**：
- 回归：预测 $t+h$ 收益率
- 分类：涨/跌/区间

**建议**：
- horizon：1h / 4h / 1d（逐步扩展）
- 标签定义：未来滚动收益 $r_{t+h}$

---

## 5. 模型层（Model Layer）
**基线**：
- 线性回归 / Ridge / Lasso
- 随机森林 / XGBoost / LightGBM

**进阶**：
- LSTM/Transformer（时间序列）
- IC 加权、多因子组合

**输出**：
- 预测分数 score
- 置信度/不确定性估计（可选）

---

## 6. 交易信号与组合构建（Signal & Portfolio）
**信号生成**：
- score → 分层（Top-K / 分位数）
- 规则化（多空对冲 / 多头）

**组合约束**：
- 最大持仓数、单品种权重上限
- 杠杆与风险预算

---

## 7. 回测与验证（Backtest & Validation）
**必须包含**：
- Walk-Forward / Rolling 验证
- 成本/滑点/交易费率
- 资金容量敏感性

**指标**：
- 年化收益、夏普、最大回撤
- IC、ICIR、Top-Bottom Spread
- 换手率与胜率

**输出**：
- 研究报告（图表 + 表格）
- 可复现参数配置

---

## 8. 研究自动化（Research Automation）
**目标**：一键从数据 → 因子 → 模型 → 回测

**建议结构**：
- configs/：数据源、市场、时间粒度
- reports/：研究结果
- runs/：实验记录与版本

---

## 9. 最小闭环（MVP 建议）
**第一阶段**（1-2 周）：
- 市场：Binance Spot
- 资产：BTC/USDT
- 粒度：1h
- 目标：完成“数据 → 因子 → 模型 → 回测”最小闭环

**第二阶段**：
- 扩展 10+ 交易对
- 引入资金费率/订单簿
- 多因子组合

---

## 10. 推荐落地目录（可选）
```
research_pipeline/
  data_prep.py
  feature_engineering.py
  labeling.py
  model_train.py
  backtest.py
  report.py
configs/
reports/
```

---

## 11. 下一步执行清单
1. 选定市场/交易所/粒度
2. 拉取样本数据并做质量检查
3. 构建首批因子（10-30 个）
4. 训练基线模型与IC分析
5. 输出首版回测报告

---

如果你确认该框架方向，我可以直接落地最小闭环脚本并跑通一条样例流程。
